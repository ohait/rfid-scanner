var app=function(){"use strict";function t(){}function e(t){for(var e,n,r=1,i=arguments.length;r<i;r++)for(e in n=arguments[r])t[e]=n[e];return t}function n(t,e){e.appendChild(t)}function r(t,e,n){e.insertBefore(t,n)}function i(t){t.parentNode.removeChild(t)}function o(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function a(){return document.createDocumentFragment()}function s(t){return document.createElement(t)}function c(t){return document.createTextNode(t)}function u(){return document.createComment("")}function l(t,e,n){t.addEventListener(e,n,!1)}function h(t,e,n){t.removeEventListener(e,n,!1)}function f(t,e,n){t.setAttribute(e,n)}function d(t,e,n){t.style.setProperty(e,n)}function m(){return Object.create(null)}function p(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function v(t,e,n,r,i){for(var o in e)if(n[o]){var a=r[o],s=i[o],c=e[o];if(c)for(var u=0;u<c.length;u+=1){var l=c[u];l.__calling||(l.__calling=!0,l.call(t,a,s),l.__calling=!1)}}}function _(t,e){t._observers={pre:m(),post:m()},t._handlers=m(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function g(t){for(;t&&t.length;)t.shift()()}var b={destroy:p,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,e)},observe:function(t,e,n){var r=n&&n.defer?this._observers.post:this._observers.pre;return(r[t]||(r[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=r[t].indexOf(e);~n&&r[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,g(this.root._beforecreate),g(this.root._oncreate),g(this.root._aftercreate),this.root._lock=!1)},teardown:p,_recompute:t,_set:function(t){var n=this._state,r={},i=!1;for(var o in t)this._differs(t[o],n[o])&&(r[o]=i=!0);i&&(this._state=e({},n,t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(v(this,this._observers.pre,r,this._state,n),this._fragment.p(r,this._state),v(this,this._observers.post,r,this._state,n)))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var y,w,x=(function(t,e){t.exports=function(){function t(){}function e(t){for(var e,n,r=1,i=arguments.length;r<i;r++)for(e in n=arguments[r])t[e]=n[e];return t}function n(){return Object.create(null)}function r(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function i(t,e,n,r,i){for(var o in e)if(n[o]){var a=r[o],s=i[o],c=e[o];if(c)for(var u=0;u<c.length;u+=1){var l=c[u];l.__calling||(l.__calling=!0,l.call(t,a,s),l.__calling=!1)}}}function o(t){for(;t&&t.length;)t.shift()()}var a={destroy:r,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,e)},observe:function(t,e,n){var r=n&&n.defer?this._observers.post:this._observers.pre;return(r[t]||(r[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=r[t].indexOf(e);~n&&r[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,o(this.root._beforecreate),o(this.root._oncreate),o(this.root._aftercreate),this.root._lock=!1)},teardown:r,_recompute:t,_set:function(t){var n=this._state,r={},o=!1;for(var a in t)this._differs(t[a],n[a])&&(r[a]=o=!0);o&&(this._state=e({},n,t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(i(this,this._observers.pre,r,this._state,n),this._fragment.p(r,this._state),i(this,this._observers.post,r,this._state,n)))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function c(t,e){return t(e={exports:{}},e.exports),e.exports}var u=function(t,e,n){var r=arguments.length;n=new Array(r>2?r-2:0);for(var i=2;i<r;i++)n[i-2]=arguments[i];if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(!t){var o=0,a="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(t){}}},l=function(t,e,n,r,i,o,a,s){if(void 0===e)throw new Error("invariant requires an error message argument");if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],l=0;(c=new Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}};function h(t){return"/"===t.charAt(0)}function f(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],r=e&&e.split("/")||[],i=t&&h(t),o=e&&h(e),a=i||o;if(t&&h(t)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var s=void 0;if(r.length){var c=r[r.length-1];s="."===c||".."===c||""===c}else s=!1;for(var u=0,l=r.length;l>=0;l--){var d=r[l];"."===d?f(r,l):".."===d?(f(r,l),u++):u&&(f(r,l),u--)}if(!a)for(;u--;u)r.unshift("..");!a||""===r[0]||r[0]&&h(r[0])||r.unshift("");var m=r.join("/");return s&&"/"!==m.substr(-1)&&(m+="/"),m}var m=Object.freeze({default:d}),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function v(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return v(t,e[n])});var n=void 0===t?"undefined":p(t);if(n!==(void 0===e?"undefined":p(e)))return!1;if("object"===n){var r=t.valueOf(),i=e.valueOf();if(r!==t||i!==e)return v(r,i);var o=Object.keys(t),a=Object.keys(e);return o.length===a.length&&o.every(function(n){return v(t[n],e[n])})}return!1}var _=Object.freeze({default:v}),g=c(function(t,e){e.__esModule=!0,e.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},e.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t};var n=e.hasBasename=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)};e.stripBasename=function(t,e){return n(t,e)?t.substr(e.length):t},e.stripTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},e.parsePath=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}},e.createPath=function(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}});s(g),g.addLeadingSlash,g.stripLeadingSlash,g.hasBasename,g.stripBasename,g.stripTrailingSlash,g.parsePath,g.createPath;var b=m&&d||m,y=_&&v||_,w=c(function(t,e){e.__esModule=!0,e.locationsAreEqual=e.createLocation=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=o(b),i=o(y);function o(t){return t&&t.__esModule?t:{default:t}}e.createLocation=function(t,e,i,o){var a=void 0;"string"==typeof t?(a=(0,g.parsePath)(t)).state=e:(void 0===(a=n({},t)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==e&&void 0===a.state&&(a.state=e));try{a.pathname=decodeURI(a.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return i&&(a.key=i),o?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=(0,r.default)(a.pathname,o.pathname)):a.pathname=o.pathname:a.pathname||(a.pathname="/"),a},e.locationsAreEqual=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&(0,i.default)(t.state,e.state)}});s(w),w.locationsAreEqual,w.createLocation;var x=c(function(t,e){e.__esModule=!0;var n,r=(n=u)&&n.__esModule?n:{default:n};e.default=function(){var t=null,e=[];return{setPrompt:function(e){return(0,r.default)(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,i,o){if(null!=t){var a="function"==typeof t?t(e,n):t;"string"==typeof a?"function"==typeof i?i(a,o):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==a)}else o(!0)},appendListener:function(t){var n=!0,r=function(){n&&t.apply(void 0,arguments)};return e.push(r),function(){n=!1,e=e.filter(function(t){return t!==r})}},notifyListeners:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}}}});s(x);var P=c(function(t,e){e.__esModule=!0,e.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),e.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},e.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},e.getConfirmation=function(t,e){return e(window.confirm(t))},e.supportsHistory=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},e.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},e.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},e.isExtraneousPopstateEvent=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}});s(P),P.canUseDOM,P.addEventListener,P.removeEventListener,P.getConfirmation,P.supportsHistory,P.supportsPopStateOnHashChange,P.supportsGoWithoutReloadUsingHash,P.isExtraneousPopstateEvent;var O=s(c(function(t,e){e.__esModule=!0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=a(u),i=a(l),o=a(x);function a(t){return t&&t.__esModule?t:{default:t}}var s={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+(0,g.stripLeadingSlash)(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:g.stripLeadingSlash,decodePath:g.addLeadingSlash},slash:{encodePath:g.addLeadingSlash,decodePath:g.addLeadingSlash}},c=function(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},h=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(P.canUseDOM,"Hash history needs a DOM");var e=window.history,a=(0,P.supportsGoWithoutReloadUsingHash)(),u=t.getUserConfirmation,l=void 0===u?P.getConfirmation:u,f=t.hashType,d=void 0===f?"slash":f,m=t.basename?(0,g.stripTrailingSlash)((0,g.addLeadingSlash)(t.basename)):"",p=s[d],v=p.encodePath,_=p.decodePath,b=function(){var t=_(c());return(0,r.default)(!m||(0,g.hasBasename)(t,m),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+m+'".'),m&&(t=(0,g.stripBasename)(t,m)),(0,w.createLocation)(t)},y=(0,o.default)(),x=function(t){n(q,t),q.length=e.length,y.notifyListeners(q.location,q.action)},O=!1,M=null,A=function(){var t=c(),e=v(t);if(t!==e)h(e);else{var n=b(),r=q.location;if(!O&&(0,w.locationsAreEqual)(r,n))return;if(M===(0,g.createPath)(n))return;M=null,E(n)}},E=function(t){O?(O=!1,x()):y.confirmTransitionTo(t,"POP",l,function(e){e?x({action:"POP",location:t}):L(t)})},L=function(t){var e=q.location,n=N.lastIndexOf((0,g.createPath)(e));-1===n&&(n=0);var r=N.lastIndexOf((0,g.createPath)(t));-1===r&&(r=0);var i=n-r;i&&(O=!0,j(i))},k=c(),C=v(k);k!==C&&h(C);var S=b(),N=[(0,g.createPath)(S)],j=function(t){(0,r.default)(a,"Hash history go(n) causes a full page reload in this browser"),e.go(t)},H=0,R=function(t){1===(H+=t)?(0,P.addEventListener)(window,"hashchange",A):0===H&&(0,P.removeEventListener)(window,"hashchange",A)},T=!1,q={length:e.length,action:"POP",location:S,createHref:function(t){return"#"+v(m+(0,g.createPath)(t))},push:function(t,e){(0,r.default)(void 0===e,"Hash history cannot push state; it is ignored");var n=(0,w.createLocation)(t,void 0,void 0,q.location);y.confirmTransitionTo(n,"PUSH",l,function(t){if(t){var e=(0,g.createPath)(n),i=v(m+e);if(c()!==i){M=e,function(t){window.location.hash=t}(i);var o=N.lastIndexOf((0,g.createPath)(q.location)),a=N.slice(0,-1===o?0:o+1);a.push(e),N=a,x({action:"PUSH",location:n})}else(0,r.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),x()}})},replace:function(t,e){(0,r.default)(void 0===e,"Hash history cannot replace state; it is ignored");var n=(0,w.createLocation)(t,void 0,void 0,q.location);y.confirmTransitionTo(n,"REPLACE",l,function(t){if(t){var e=(0,g.createPath)(n),r=v(m+e);c()!==r&&(M=e,h(r));var i=N.indexOf((0,g.createPath)(q.location));-1!==i&&(N[i]=e),x({action:"REPLACE",location:n})}})},go:j,goBack:function(){return j(-1)},goForward:function(){return j(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=y.setPrompt(t);return T||(R(1),T=!0),function(){return T&&(T=!1,R(-1)),e()}},listen:function(t){var e=y.appendListener(t);return R(1),function(){R(-1),e()}}};return q}}))(),M="router-link-active",A={navigate:function(t,e){t&&t.preventDefault&&t.preventDefault(),e&&O.location.pathname!==e&&(this.get("replace")?O.replace(e):O.push(e))},setActivedClass:function(t){var e=t.pathname===this.get("to");this.set({active:e})}};function E(){this.get("event")()}function L(t){!function(t,e){t._observers={pre:n(),post:n()},t._handlers=n(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}(this,t),this._state=e({replace:!1,to:"/",basePath:"#",active:!1,class:"",activeClass:M,event:null},t.data),this._handlers.destroy=[E],this._slotted=t.slots||{};var r=function(){this.setActivedClass(O.location),this.set({event:O.listen(this.setActivedClass.bind(this))})}.bind(this);t.root||(this._oncreate=[]),this.slots={},this._fragment=function(t,e){var n,r,i,o=t._slotted.default;function a(e){var n=t.get();t.navigate(e,n.to)}return{c:function(){n=document.createElement("a"),this.h()},h:function(){var t,o;n.href=r=""+e.basePath+e.to,n.className=i=e.class+" "+(e.active?e.activeClass:""),t="click",o=a,n.addEventListener(t,o,!1)},m:function(t,e){!function(t,e,n){e.insertBefore(t,n)}(n,t,e),o&&function(t,e){e.appendChild(t)}(o,n)},p:function(t,e){(t.basePath||t.to)&&r!==(r=""+e.basePath+e.to)&&(n.href=r),(t.class||t.active||t.activeClass)&&i!==(i=e.class+" "+(e.active?e.activeClass:""))&&(n.className=i)},u:function(){var t;(t=n).parentNode.removeChild(t),o&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(n,o)},d:function(){var t,e;t="click",e=a,n.removeEventListener(t,e,!1)}}}(this,this._state),this.root._oncreate.push(r),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),o(this._oncreate))}e(L.prototype,A,a);var k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C=function(t,e){return t.map(function(t){return null!==t.match(new RegExp(":"+e))?"("+e+")":t}).join("\\/")},S=function(t,e,n){var r={};return t.filter(function(t){return null!==t.match(new RegExp(":"+n))}).map(function(t){return t.match(new RegExp(":("+n+")"))[1]}).forEach(function(t,n){var i=n+1;r[t]=e[i]}),r},N=function(t,e,n,r){var i=t[e],o=i.Component,a=i.props;o||(o=t[e]);var s={data:{path:r}};return a=a||{},Object.prototype.hasOwnProperty.call(a,"data")&&(a.data.path=r,s={}),new o(k({target:n},a,s))},j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,r=void 0,i=void 0,o=e.pathRegex?e.pathRegex:"[a-zA-Z0-9]+",a=e.defaultRoute?e.defaultRoute:"default",s=function(e){var r=!1;for(var s in i&&i.destroy(),t)if(Object.prototype.hasOwnProperty.call(t,s)){var c=s.split("/"),u=C(c,o),l=e.pathname.match(new RegExp("^"+u+"$"));if(null!==l){var h=S(c,l,o);i=N(t,s,n,h),r=!0;break}}!r&&t[a]&&(i=N(t,a,n,{}))};return{create:function(t){n="string"==typeof t?document.querySelector(t):t,r=O.listen(s),s(O.location)},destroy:function(){r&&(r(),r=void 0)}}};return j.push=function(t){O.push(t)},j.replace=function(t){O.replace(t)},j.go=function(t){O.go(t)},j.listen=function(t){O.listen(t)},{createRouter:j,RouterLink:L}}()}(y={exports:{}},y.exports),y.exports),P=(w=x)&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w;function O(t){var e="",n="";return t.split(".").map(function(t){var r={sep:n,name:t,link:e=e+n+t};return n=".",r})}function M(e,o){var a,u,l,h,f=o.l,d=(o.l_index,f.sep),m=f.name;return{c:function(){a=c(d),u=s("a"),l=c(m),this.h()},h:function(){u.href=h="/#/shelf/"+f.link},m:function(t,e){r(a,t,e),r(u,t,e),n(l,u)},p:function(t,e){f=e.l,e.l_index,t.loc&&d!==(d=f.sep)&&(a.data=d),t.loc&&m!==(m=f.name)&&(l.data=m),t.loc&&h!==(h="/#/shelf/"+f.link)&&(u.href=h)},u:function(){i(a),i(u)},d:t}}function A(t,n){for(var a,s=O(n.loc),c=[],l=0;l<s.length;l+=1)c[l]=M(0,e({},n,{l:s[l],l_index:l}));return{c:function(){for(var t=0;t<c.length;t+=1)c[t].c();a=u()},m:function(t,e){for(var n=0;n<c.length;n+=1)c[n].m(t,e);r(a,t,e)},p:function(t,n){var r=O(n.loc);if(t.loc){for(var i=0;i<r.length;i+=1){var o=e({},n,{l:r[i],l_index:i});c[i]?c[i].p(t,o):(c[i]=M(0,o),c[i].c(),c[i].m(a.parentNode,a))}for(;i<c.length;i+=1)c[i].u(),c[i].d();c.length=r.length}},u:function(){for(var t=0;t<c.length;t+=1)c[t].u();i(a)},d:function(){o(c)}}}function E(e,n){var o;return{c:function(){o=c("N/A")},m:function(t,e){r(o,t,e)},p:t,u:function(){i(o)},d:t}}function L(t){_(this,t),this._state=e({},t.data),this._fragment=function(t,e){var n;function o(t){return t.loc?A:E}var a=o(e),c=a(t,e);return{c:function(){n=s("div"),c.c()},m:function(t,e){r(n,t,e),c.m(n,null)},p:function(e,r){a===(a=o(r))&&c?c.p(e,r):(c.u(),c.d(),(c=a(t,r)).c(),c.m(n,null))},u:function(){i(n),c.u()},d:function(){c.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function k(t){f(t,"svelte-3775128793","")}function C(t,e){var n,o=e.res,a=(e.res_index,o.loc&&S(t,e));return{c:function(){a&&a.c(),n=u()},m:function(t,e){a&&a.m(t,e),r(n,t,e)},p:function(e,r){o=r.res,r.res_index,o.loc?a?a.p(e,r):((a=S(t,r)).c(),a.m(n.parentNode,n)):a&&(a.u(),a.d(),a=null)},u:function(){a&&a.u(),i(n)},d:function(){a&&a.d()}}}function S(t,e){var o,u,l,h,f,d=e.res,m=(e.res_index,d.tags),p=new L({root:t.root,slots:{default:a()},data:{loc:d.loc}});return{c:function(){o=s("tr"),u=s("td"),p._fragment.c(),l=c("\n            "),h=s("td"),f=c(m),this.h()},h:function(){k(u),k(h)},m:function(t,e){r(o,t,e),n(u,o),p._mount(u,null),n(l,o),n(h,o),n(f,h)},p:function(t,e){d=e.res,e.res_index;var n={};t.shelves&&(n.loc=d.loc),p._set(n),t.shelves&&m!==(m=d.tags)&&(f.data=m)},u:function(){i(o)},d:function(){p.destroy(!1)}}}function N(t,n){for(var a,s=n.shelves.results,c=[],l=0;l<s.length;l+=1)c[l]=C(t,e({},n,{res:s[l],res_index:l}));return{c:function(){for(var t=0;t<c.length;t+=1)c[t].c();a=u()},m:function(t,e){for(var n=0;n<c.length;n+=1)c[n].m(t,e);r(a,t,e)},p:function(n,r){var i=r.shelves.results;if(n.shelves){for(var o=0;o<i.length;o+=1){var s=e({},r,{res:i[o],res_index:o});c[o]?c[o].p(n,s):(c[o]=C(t,s),c[o].c(),c[o].m(a.parentNode,a))}for(;o<c.length;o+=1)c[o].u(),c[o].d();c.length=i.length}},u:function(){for(var t=0;t<c.length;t+=1)c[t].u();i(a)},d:function(){o(c)}}}function j(t){var o,a,u,l,h,m,p,v;_(this,t),this._state=e({},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(o=this,a=this._state,v=a.shelves.results&&N(o,a),{c:function(){u=s("div"),l=s("table"),(h=s("thead")).innerHTML="<tr><th svelte-3775128793>shelf</th><th svelte-3775128793>items</th></tr><tr></tr>",m=c("\n    "),p=s("tbody"),v&&v.c(),this.h()},h:function(){l.border="1",f(l,"cellspacing","0"),f(l,"cellpadding","3"),d(l,"max-width","250px")},m:function(t,e){r(u,t,e),n(l,u),n(h,l),n(m,l),n(p,l),v&&v.m(p,null)},p:function(t,e){e.shelves.results?v?v.p(t,e):((v=N(o,e)).c(),v.m(p,null)):v&&(v.u(),v.d(),v=null)},u:function(){i(u),v&&v.u()},d:function(){v&&v.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function H(t){f(t,"svelte-2892906231","")}function R(t,e){var o,a,u,l,h,f,m,p,v,_,g,b,y,w,x,P,O,M,A,E,k,C,S,N,j,R=e.res,T=(e.res_index,R.last_at.ago||R.last_at.iso8601),q=R.item_id,U=e.Array.isArray(R.meta.callnumber)?R.meta.callnumber.join(" "):R.meta.callnumber,I=R.meta.author,$=R.meta.title,B=new L({root:t.root,data:{loc:R.tags[0].temporary.loc}});return{c:function(){o=s("tr"),a=s("td"),u=s("abbr"),l=c(T),f=c("\n            "),m=s("td"),B._fragment.c(),p=c("\n            "),v=s("td"),_=s("a"),g=c(q),y=c("\n            "),w=s("td"),x=c(U),P=c("\n            "),O=s("td"),M=s("abbr"),A=c(I),k=c("\n            "),C=s("td"),S=s("abbr"),N=c($),this.h()},h:function(){H(a),H(u),u.title=h=R.last_at.iso8601,H(m),H(v),H(_),_.href=b="/#/item/"+R.item_supplier+"/"+R.item_id,H(w),H(O),H(M),M.title=E=R.meta.author,d(O,"max-width","200px"),H(C),H(S),S.title=j=R.meta.title,d(C,"max-width","200px")},m:function(t,e){r(o,t,e),n(a,o),n(u,a),n(l,u),n(f,o),n(m,o),B._mount(m,null),n(p,o),n(v,o),n(_,v),n(g,_),n(y,o),n(w,o),n(x,w),n(P,o),n(O,o),n(M,O),n(A,M),n(k,o),n(C,o),n(S,C),n(N,S)},p:function(t,e){R=e.res,e.res_index,t.shelf&&T!==(T=R.last_at.ago||R.last_at.iso8601)&&(l.data=T),t.shelf&&h!==(h=R.last_at.iso8601)&&(u.title=h);var n={};t.shelf&&(n.loc=R.tags[0].temporary.loc),B._set(n),t.shelf&&q!==(q=R.item_id)&&(g.data=q),t.shelf&&b!==(b="/#/item/"+R.item_supplier+"/"+R.item_id)&&(_.href=b),(t.Array||t.shelf)&&U!==(U=e.Array.isArray(R.meta.callnumber)?R.meta.callnumber.join(" "):R.meta.callnumber)&&(x.data=U),t.shelf&&I!==(I=R.meta.author)&&(A.data=I),t.shelf&&E!==(E=R.meta.author)&&(M.title=E),t.shelf&&$!==($=R.meta.title)&&(N.data=$),t.shelf&&j!==(j=R.meta.title)&&(S.title=j)},u:function(){i(o)},d:function(){B.destroy(!1)}}}function T(t,n){for(var a,s=n.shelf.results,c=[],l=0;l<s.length;l+=1)c[l]=R(t,e({},n,{res:s[l],res_index:l}));return{c:function(){for(var t=0;t<c.length;t+=1)c[t].c();a=u()},m:function(t,e){for(var n=0;n<c.length;n+=1)c[n].m(t,e);r(a,t,e)},p:function(n,r){var i=r.shelf.results;if(n.shelf||n.Array){for(var o=0;o<i.length;o+=1){var s=e({},r,{res:i[o],res_index:o});c[o]?c[o].p(n,s):(c[o]=R(t,s),c[o].c(),c[o].m(a.parentNode,a))}for(;o<c.length;o+=1)c[o].u(),c[o].d();c.length=i.length}},u:function(){for(var t=0;t<c.length;t+=1)c[t].u();i(a)},d:function(){o(c)}}}function q(t){_(this,t),this._state=e({Array:Array},t.data);var o,a,u,l,h,d,m,p,v=function(){}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(o=this,a=this._state,p=a.shelf.results&&T(o,a),{c:function(){u=s("div"),l=s("table"),(h=s("thead")).innerHTML='<tr><th svelte-2892906231>at</th><th svelte-2892906231>location</th><th svelte-2892906231>barcode</th><th svelte-2892906231>callnum</th><th svelte-2892906231 width="15%">author</th><th svelte-2892906231>title</th><th svelte-2892906231>last</th></tr>',d=c("\n    "),m=s("tbody"),p&&p.c(),this.h()},h:function(){l.border="1",f(l,"cellspacing","0"),f(l,"cellpadding","3")},m:function(t,e){r(u,t,e),n(l,u),n(h,l),n(d,l),n(m,l),p&&p.m(m,null)},p:function(t,e){e.shelf.results?p?p.p(t,e):((p=T(o,e)).c(),p.m(m,null)):p&&(p.u(),p.d(),p=null)},u:function(){i(u),p&&p.u()},d:function(){p&&p.d()}}),this.root._oncreate.push(v),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function U(t){f(t,"svelte-422554819","")}function I(t,e){var n,o,a,u,l=e.path.shelfId,h=new q({root:t.root,data:{shelf:e.shelf,locationMap:e.locationMap}});return{c:function(){n=c("Shelf: "),o=c(l),a=c("\n    "),u=s("div"),h._fragment.c(),this.h()},h:function(){U(u),u.className="shelf-content"},m:function(t,e){r(n,t,e),r(o,t,e),r(a,t,e),r(u,t,e),h._mount(u,null)},p:function(t,e){t.path&&l!==(l=e.path.shelfId)&&(o.data=l);var n={};t.shelf&&(n.shelf=e.shelf),t.locationMap&&(n.locationMap=e.locationMap),h._set(n)},u:function(){i(n),i(o),i(a),i(u)},d:function(){h.destroy(!1)}}}function $(t){_(this,t),this._state=e({shelves:{},shelf:{},locationMap:null},t.data);var o,a,u,l,h,f,d,m=function(){fetch("/api/shelves").then(t=>t.json()).then(t=>new Promise(e=>{let n=new Map;for(const e of t.results){let t=new Set,r=e.loc.split(".");for(let e=0;e<r.length;e++)t.add({link:`${r.slice(0,e+1).join(".")}`,name:r[e]});n.set(e.loc,t)}e(this.set({locationMap:n,shelves:t}))})).then(()=>{const t=this.get("path");return t.shelfId?Promise.resolve(fetch(`/api/shelf/${t.shelfId}`)):Promise.reject("No shelf id")}).then(t=>t.json()).then(t=>this.set({shelf:t})).catch(t=>{throw console.log(`something broke: ${t}`),t})}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(o=this,a=this._state,f=new j({root:o.root,data:{shelves:a.shelves,locationMap:a.locationMap}}),d=a.path.shelfId&&I(o,a),{c:function(){u=s("div"),l=s("div"),f._fragment.c(),h=c("\n  "),d&&d.c(),this.h()},h:function(){U(u),U(l),l.className="shelf-list",u.className="container"},m:function(t,e){r(u,t,e),n(l,u),f._mount(l,null),n(h,u),d&&d.m(u,null)},p:function(t,e){var n={};t.shelves&&(n.shelves=e.shelves),t.locationMap&&(n.locationMap=e.locationMap),f._set(n),e.path.shelfId?d?d.p(t,e):((d=I(o,e)).c(),d.m(u,null)):d&&(d.u(),d.d(),d=null)},u:function(){i(u),d&&d.u()},d:function(){f.destroy(!1),d&&d.d()}}),this.root._oncreate.push(m),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function B(t){f(t,"svelte-3891022760","")}function D(e,o){var a,u,l,h,f,d,m,p,v,_,g,b,y,w,x,P,O,M,A,E,L,k,C,S,N,j,H,R,T,q,U,I,$,D,W,z,F,G=o.item.response.meta.title,Z=o.item.response.meta.author,K=o.item.response.meta.callnumber,V=o.item.item_supplier,Y=o.item.item_id,J=o.item.response.meta.biblionumber;return{c:function(){a=s("tr"),u=s("td"),l=s("img"),f=c("\n      "),d=s("tr"),m=s("th"),p=c(G),v=c("\n      "),_=s("tr"),(g=s("td")).textContent="author",b=s("td"),y=c(Z),w=c("\n      "),x=s("tr"),(P=s("td")).textContent="cn",O=s("td"),M=c(K),A=c("\n      "),E=s("tr"),(L=s("td")).textContent="supplier",k=s("td"),C=c(V),S=c("\n      "),N=s("tr"),(j=s("td")).textContent="item_id",H=s("td"),R=c(Y),T=c("\n      "),q=s("tr"),(U=s("td")).textContent="bibnum",I=s("td"),$=c(J),D=c(" ["),(W=s("a")).textContent="Koha",F=c("]"),this.h()},h:function(){B(a),B(u),l.src=h="https://img.deichman.no/biblionumber/"+o.item.response.meta.biblionumber,l.alt="item image/cover",u.colSpan="2",B(d),B(m),m.colSpan="2",B(_),B(g),B(b),B(x),B(P),B(O),B(E),B(L),B(k),B(N),B(j),B(H),B(q),B(U),B(I),W.href=z="https://intra.deichman.no/cgi-bin/koha/catalogue/detail.pl?biblionumber="+o.item.response.meta.biblionumber},m:function(t,e){r(a,t,e),n(u,a),n(l,u),n(f,a),r(d,t,e),n(m,d),n(p,m),r(v,t,e),r(_,t,e),n(g,_),n(b,_),n(y,b),r(w,t,e),r(x,t,e),n(P,x),n(O,x),n(M,O),r(A,t,e),r(E,t,e),n(L,E),n(k,E),n(C,k),r(S,t,e),r(N,t,e),n(j,N),n(H,N),n(R,H),r(T,t,e),r(q,t,e),n(U,q),n(I,q),n($,I),n(D,I),n(W,I),n(F,I)},p:function(t,e){t.item&&h!==(h="https://img.deichman.no/biblionumber/"+e.item.response.meta.biblionumber)&&(l.src=h),t.item&&G!==(G=e.item.response.meta.title)&&(p.data=G),t.item&&Z!==(Z=e.item.response.meta.author)&&(y.data=Z),t.item&&K!==(K=e.item.response.meta.callnumber)&&(M.data=K),t.item&&V!==(V=e.item.item_supplier)&&(C.data=V),t.item&&Y!==(Y=e.item.item_id)&&(R.data=Y),t.item&&J!==(J=e.item.response.meta.biblionumber)&&($.data=J),t.item&&z!==(z="https://intra.deichman.no/cgi-bin/koha/catalogue/detail.pl?biblionumber="+e.item.response.meta.biblionumber)&&(W.href=z)},u:function(){i(a),i(d),i(v),i(_),i(w),i(x),i(A),i(E),i(S),i(N),i(T),i(q)},d:t}}function W(t,e){var o,a,l,h,f,d,m,p,v,_=e.tag,g=(e.tag_index,_.rfid),b=_.permanent.at&&z(t,e),y=_.temporary.at&&F(t,e);return{c:function(){(o=s("tr")).innerHTML='<th svelte-3891022760 colspan="2">tag</th>',a=c("\n        "),l=s("tr"),(h=s("td")).textContent="rfid",f=s("td"),d=c(g),m=c("\n        "),b&&b.c(),p=c("\n        "),y&&y.c(),v=u(),this.h()},h:function(){B(o),B(l),B(h),B(f)},m:function(t,e){r(o,t,e),r(a,t,e),r(l,t,e),n(h,l),n(f,l),n(d,f),r(m,t,e),b&&b.m(t,e),r(p,t,e),y&&y.m(t,e),r(v,t,e)},p:function(e,n){_=n.tag,n.tag_index,e.item&&g!==(g=_.rfid)&&(d.data=g),_.permanent.at?b?b.p(e,n):((b=z(t,n)).c(),b.m(p.parentNode,p)):b&&(b.u(),b.d(),b=null),_.temporary.at?y?y.p(e,n):((y=F(t,n)).c(),y.m(v.parentNode,v)):y&&(y.u(),y.d(),y=null)},u:function(){i(o),i(a),i(l),i(m),b&&b.u(),i(p),y&&y.u(),i(v)},d:function(){b&&b.d(),y&&y.d()}}}function z(t,e){var o,a,u,l,h,f,d,m,p,v,_,g,b,y,w,x,P,O=e.tag,M=(e.tag_index,O.permanent.at.ago||O.permanent.at.iso8601),A=O.permanent.dev,E=new L({root:t.root,data:{loc:O.permanent.loc}});return{c:function(){o=s("tr"),(a=s("td")).textContent="perm",u=s("td"),E._fragment.c(),l=c("\n            "),h=s("tr"),(f=s("td")).textContent="at",d=s("td"),m=s("abbr"),p=c(M),_=c("\n            "),g=s("tr"),(b=s("td")).textContent="dev",y=s("td"),w=s("a"),x=c(A),this.h()},h:function(){B(o),B(a),B(u),B(h),B(f),B(d),m.title=v=O.permanent.at.iso8601,B(g),B(b),B(y),w.href=P="/#/dev/"+O.permanent.dev},m:function(t,e){r(o,t,e),n(a,o),n(u,o),E._mount(u,null),r(l,t,e),r(h,t,e),n(f,h),n(d,h),n(m,d),n(p,m),r(_,t,e),r(g,t,e),n(b,g),n(y,g),n(w,y),n(x,w)},p:function(t,e){O=e.tag,e.tag_index;var n={};t.item&&(n.loc=O.permanent.loc),E._set(n),t.item&&M!==(M=O.permanent.at.ago||O.permanent.at.iso8601)&&(p.data=M),t.item&&v!==(v=O.permanent.at.iso8601)&&(m.title=v),t.item&&A!==(A=O.permanent.dev)&&(x.data=A),t.item&&P!==(P="/#/dev/"+O.permanent.dev)&&(w.href=P)},u:function(){i(o),i(l),i(h),i(_),i(g)},d:function(){E.destroy(!1)}}}function F(t,e){var o,a,u,l,h,f,d,m,p,v,_,g,b,y,w,x,P,O=e.tag,M=(e.tag_index,O.temporary.at.ago||O.temporary.at.iso8601),A=O.temporary.dev,E=new L({root:t.root,data:{loc:O.temporary.loc}});return{c:function(){o=s("tr"),(a=s("td")).textContent="temp",u=s("td"),E._fragment.c(),l=c("\n            "),h=s("tr"),(f=s("td")).textContent="at",d=s("td"),m=s("abbr"),p=c(M),_=c("\n            "),g=s("tr"),(b=s("td")).textContent="dev",y=s("td"),w=s("a"),x=c(A),this.h()},h:function(){B(o),B(a),B(u),B(h),B(f),B(d),m.title=v=O.temporary.at.iso8601,B(g),B(b),B(y),w.href=P="/#/dev/"+O.temporary.dev},m:function(t,e){r(o,t,e),n(a,o),n(u,o),E._mount(u,null),r(l,t,e),r(h,t,e),n(f,h),n(d,h),n(m,d),n(p,m),r(_,t,e),r(g,t,e),n(b,g),n(y,g),n(w,y),n(x,w)},p:function(t,e){O=e.tag,e.tag_index;var n={};t.item&&(n.loc=O.temporary.loc),E._set(n),t.item&&M!==(M=O.temporary.at.ago||O.temporary.at.iso8601)&&(p.data=M),t.item&&v!==(v=O.temporary.at.iso8601)&&(m.title=v),t.item&&A!==(A=O.temporary.dev)&&(x.data=A),t.item&&P!==(P="/#/dev/"+O.temporary.dev)&&(w.href=P)},u:function(){i(o),i(l),i(h),i(_),i(g)},d:function(){E.destroy(!1)}}}function G(e,o){var a,u,l,h,f,d=o.e,m=(o.e_index,d.item_id);return{c:function(){a=s("tr"),u=s("td"),l=s("a"),h=c(m),this.h()},h:function(){B(a),B(u),l.href=f="/#/item/"+d.item_supplier+"/"+d.item_id,u.colSpan="2"},m:function(t,e){r(a,t,e),n(u,a),n(l,u),n(h,l)},p:function(t,e){d=e.e,e.e_index,t.item&&m!==(m=d.item_id)&&(h.data=m),t.item&&f!==(f="/#/item/"+d.item_supplier+"/"+d.item_id)&&(l.href=f)},u:function(){i(a)},d:t}}function Z(e,o){var a,u,l,h,f,d=o.e,m=(o.e_index,d.item_id);return{c:function(){a=s("tr"),u=s("td"),l=s("a"),h=c(m),this.h()},h:function(){B(a),B(u),l.href=f="/#/item/"+d.item_supplier+"/"+d.item_id,u.colSpan="2"},m:function(t,e){r(a,t,e),n(u,a),n(l,u),n(h,l)},p:function(t,e){d=e.e,e.e_index,t.item&&m!==(m=d.item_id)&&(h.data=m),t.item&&f!==(f="/#/item/"+d.item_supplier+"/"+d.item_id)&&(l.href=f)},u:function(){i(a)},d:t}}function K(t,n){for(var a,l,h,f,d,m,p=n.item.response.around.before,v=[],_=0;_<p.length;_+=1)v[_]=G(0,e({},n,{e:p[_],e_index:_}));var g=n.item.response.around.after,b=[];for(_=0;_<g.length;_+=1)b[_]=Z(0,e({},n,{e:g[_],e_index:_}));return{c:function(){(a=s("tr")).innerHTML='<th svelte-3891022760 colspan="2">before</th>',l=c("\n        ");for(var t=0;t<v.length;t+=1)v[t].c();h=c("\n        "),(f=s("tr")).innerHTML='<th svelte-3891022760 colspan="2">after</th>',d=c("\n        ");for(t=0;t<b.length;t+=1)b[t].c();m=u(),this.h()},h:function(){B(a),B(f)},m:function(t,e){r(a,t,e),r(l,t,e);for(var n=0;n<v.length;n+=1)v[n].m(t,e);r(h,t,e),r(f,t,e),r(d,t,e);for(n=0;n<b.length;n+=1)b[n].m(t,e);r(m,t,e)},p:function(t,n){var r=n.item.response.around.before;if(t.item){for(var i=0;i<r.length;i+=1){var o=e({},n,{e:r[i],e_index:i});v[i]?v[i].p(t,o):(v[i]=G(0,o),v[i].c(),v[i].m(h.parentNode,h))}for(;i<v.length;i+=1)v[i].u(),v[i].d();v.length=r.length}var a=n.item.response.around.after;if(t.item){for(i=0;i<a.length;i+=1){var s=e({},n,{e:a[i],e_index:i});b[i]?b[i].p(t,s):(b[i]=Z(0,s),b[i].c(),b[i].m(m.parentNode,m))}for(;i<b.length;i+=1)b[i].u(),b[i].d();b.length=a.length}},u:function(){i(a),i(l);for(var t=0;t<v.length;t+=1)v[t].u();i(h),i(f),i(d);for(t=0;t<b.length;t+=1)b[t].u();i(m)},d:function(){o(v),o(b)}}}function V(t,a){for(var u,l,h,m=a.item.response&&a.item.response.meta&&D(0,a),p=a.item.response.tags,v=[],_=0;_<p.length;_+=1)v[_]=W(t,e({},a,{tag:p[_],tag_index:_}));var g=a.item.response.around&&K(0,a);return{c:function(){u=s("table"),m&&m.c(),l=c("\n    \n      ");for(var t=0;t<v.length;t+=1)v[t].c();h=c("\n      "),g&&g.c(),this.h()},h:function(){u.border="1",f(u,"cellspacing","0"),f(u,"cellpadding","3"),d(u,"max-width","250px")},m:function(t,e){r(u,t,e),m&&m.m(u,null),n(l,u);for(var i=0;i<v.length;i+=1)v[i].m(u,null);n(h,u),g&&g.m(u,null)},p:function(n,r){r.item.response&&r.item.response.meta?m?m.p(n,r):((m=D(0,r)).c(),m.m(u,l)):m&&(m.u(),m.d(),m=null);var i=r.item.response.tags;if(n.item){for(var o=0;o<i.length;o+=1){var a=e({},r,{tag:i[o],tag_index:o});v[o]?v[o].p(n,a):(v[o]=W(t,a),v[o].c(),v[o].m(u,h))}for(;o<v.length;o+=1)v[o].u(),v[o].d();v.length=i.length}r.item.response.around?g?g.p(n,r):((g=K(0,r)).c(),g.m(u,null)):g&&(g.u(),g.d(),g=null)},u:function(){i(u),m&&m.u();for(var t=0;t<v.length;t+=1)v[t].u();g&&g.u()},d:function(){m&&m.d(),o(v),g&&g.d()}}}function Y(t){var n,o,a,c;_(this,t),this._state=e({},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(n=this,o=this._state,c=o.item&&V(n,o),{c:function(){a=s("div"),c&&c.c()},m:function(t,e){r(a,t,e),c&&c.m(a,null)},p:function(t,e){e.item?c?c.p(t,e):((c=V(n,e)).c(),c.m(a,null)):c&&(c.u(),c.d(),c=null)},u:function(){i(a),c&&c.u()},d:function(){c&&c.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function J(t){return console.log(t),""}function Q(t){f(t,"svelte-2892906231","")}function X(e,n){var o;return{c:function(){(o=s("tr")).innerHTML='<td svelte-2892906231 colspan="5">...</td>'},m:function(t,e){r(o,t,e)},p:t,u:function(){i(o)},d:t}}function tt(e,o){o.answer;var a,u,l,h,f,m,p,v,_,g,b,y,w,x,P,O,M,A,E,L,k=o.res,C=(o.res_index,k.last_seen.ago||k.last_seen.iso8601),S=k.item_id,N=k.meta.author,j=k.meta.title;return{c:function(){a=s("tr"),u=s("td"),l=s("abbr"),h=c(C),m=c("\n                  "),p=s("td"),v=s("a"),_=c(S),b=c("\n                  "),y=s("td"),w=s("abbr"),x=c(N),O=c("\n                  "),M=s("td"),A=s("abbr"),E=c(j),this.h()},h:function(){Q(u),Q(l),l.title=f=k.last_seen.iso8601,Q(p),Q(v),v.href=g="/#/item/"+k.item_id,Q(y),Q(w),w.title=P=k.meta.author,d(y,"max-width","200px"),Q(M),Q(A),A.title=L=k.meta.title,d(M,"max-width","200px")},m:function(t,e){r(a,t,e),n(u,a),n(l,u),n(h,l),n(m,a),n(p,a),n(v,p),n(_,v),n(b,a),n(y,a),n(w,y),n(x,w),n(O,a),n(M,a),n(A,M),n(E,A)},p:function(t,e){e.answer,k=e.res,e.res_index,t.results&&C!==(C=k.last_seen.ago||k.last_seen.iso8601)&&(h.data=C),t.results&&f!==(f=k.last_seen.iso8601)&&(l.title=f),t.results&&S!==(S=k.item_id)&&(_.data=S),t.results&&g!==(g="/#/item/"+k.item_id)&&(v.href=g),t.results&&N!==(N=k.meta.author)&&(x.data=N),t.results&&P!==(P=k.meta.author)&&(w.title=P),t.results&&j!==(j=k.meta.title)&&(E.data=j),t.results&&L!==(L=k.meta.title)&&(A.title=L)},u:function(){i(a)},d:t}}function et(t,n){for(var a,s=n.answer,c=s.results,l=[],h=0;h<c.length;h+=1)l[h]=tt(0,e({},n,{res:c[h],res_index:h}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();a=u()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);r(a,t,e)},p:function(t,n){var r=(s=n.answer).results;if(t.results){for(var i=0;i<r.length;i+=1){var o=e({},n,{res:r[i],res_index:i});l[i]?l[i].p(t,o):(l[i]=tt(0,o),l[i].c(),l[i].m(a.parentNode,a))}for(;i<l.length;i+=1)l[i].u(),l[i].d();l.length=r.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();i(a)},d:function(){o(l)}}}function nt(e,n){var o;n.answer;return{c:function(){(o=s("tr")).innerHTML='<td svelte-2892906231 colspan="5">No Entries</td>'},m:function(t,e){r(o,t,e)},p:function(t,e){e.answer},u:function(){i(o)},d:t}}function rt(t,e){var n,o=e.answer;function a(t){return o.results&&o.results.length?et:nt}var s=a(),c=s(t,e);return{c:function(){c.c(),n=u()},m:function(t,e){c.m(t,e),r(n,t,e)},p:function(e,r){o=r.answer,s===(s=a())&&c?c.p(e,r):(c.u(),c.d(),(c=s(t,r)).c(),c.m(n.parentNode,n))},u:function(){c.u(),i(n)},d:function(){c.d()}}}function it(t,e){var n,o,a,s=e.answer,l=J(s),h=s&&rt(t,e);return{c:function(){n=c(l),o=c("\n        "),h&&h.c(),a=u()},m:function(t,e){r(n,t,e),r(o,t,e),h&&h.m(t,e),r(a,t,e)},p:function(e,r){s=r.answer,e.results&&l!==(l=J(s))&&(n.data=l),s?h?h.p(e,r):((h=rt(t,r)).c(),h.m(a.parentNode,a)):h&&(h.u(),h.d(),h=null)},u:function(){i(n),i(o),h&&h.u(),i(a)},d:function(){h&&h.d()}}}function ot(e,o){var a,u,l,h,f=o.error,d=f;return{c:function(){a=s("tr"),u=s("td"),l=c("error: "),h=c(d),this.h()},h:function(){Q(u),u.colSpan="6"},m:function(t,e){r(a,t,e),n(u,a),n(l,u),n(h,u)},p:function(t,e){f=e.error,t.results&&d!==(d=f)&&(h.data=d)},u:function(){i(a)},d:t}}function at(t){_(this,t),this._state=e({results:[]},t.data);var o=function(){console.log(this),this.observe("query",t=>{console.log("changed: ",t),t&&t.length>=3?this.set({results:fetch(`/api/search?q=${t}`).then(t=>t.json())}):this.set({results:void 0})})}.bind(this);t.root||(this._oncreate=[]),this._fragment=function(t,o){var a,c,u,l,h,d,m,p;function v(e,n,r){if(e===d){var i=l;l=n&&(h=n)(t,r),i&&(i.u(),i.d(),l.c(),l.m(u,null),t.root.set({}))}}function _(n,r){var i,o=d={};if((i=n)&&"function"==typeof i.then){if(n.then(function(n){var r=t.get();v(o,it,e({},r,p={answer:n}))},function(n){var r=t.get();v(o,ot,e({},r,p={error:n}))}),h!==X)return v(o,X,r),!0}else if(p={answer:n},h!==it)return v(o,it,e({},r,p)),!0}return _(m=o.results,o),{c:function(){a=s("div"),c=s("table"),u=s("tbody"),l.c(),this.h()},h:function(){c.border="1",f(c,"cellspacing","0"),f(c,"cellpadding","3")},m:function(t,e){r(a,t,e),n(c,a),n(u,c),l.m(u,null)},p:function(t,n){"results"in t&&m!==(m=n.results)&&_(m,n)||l.p(t,e({},n,p))},u:function(){i(a),l.u()},d:function(){d=null,l.d()}}}(this,this._state),this.root._oncreate.push(o),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),g(this._oncreate))}function st(t){f(t,"svelte-3007816744","")}function ct(t,e){var o,a,u,d,m,p,v,_,g,b,y=e.item.response.meta.title,w=!1;function x(){w=!0,t.set({query:v.value}),w=!1}var P=new at({root:t.root,data:{query:e.query}});return{c:function(){o=s("h1"),a=c(y),u=c("\n      "),d=s("form"),(m=s("label")).textContent="Search:",p=c("\n      "),v=s("input"),_=c("\n      "),P._fragment.c(),g=c("\n      "),b=s("hr"),this.h()},h:function(){m.htmlFor="code",l(v,"input",x),v.id="code",v.name="code",v.className="ui-autocomplete-input",v.autocomplete="off",f(b,"size","1")},m:function(t,i){r(o,t,i),n(a,o),r(u,t,i),r(d,t,i),n(m,d),n(p,d),n(v,d),v.value=e.query,n(_,d),P._mount(d,null),r(g,t,i),r(b,t,i)},p:function(t,e){t.item&&y!==(y=e.item.response.meta.title)&&(a.data=y),w||(v.value=e.query);var n={};t.query&&(n.query=e.query),P._set(n)},u:function(){i(o),i(u),i(d),i(g),i(b)},d:function(){h(v,"input",x),P.destroy(!1)}}}function ut(t,a){for(var u,l,h,f,d,m,p,v,_,g,b,y,w,x,P,O,M=a.it,A=(a.it_index,M.at.ago||M.at.iso8601),E=M.rfid||"N/A",k=M.dev||"N/A",C=new L({root:t.root,data:{loc:M.location}}),S=M.actions,N=[],j=0;j<S.length;j+=1)N[j]=lt(t,e({},a,{action:S[j],action_index:j}));return{c:function(){u=s("tr"),l=s("td"),h=s("abbr"),f=c(A),m=c("\n            "),p=s("td"),C._fragment.c(),v=c("\n            "),_=s("td"),g=s("div");for(var t=0;t<N.length;t+=1)N[t].c();b=c("\n            "),y=s("td"),w=c(E),x=c("\n            "),P=s("td"),O=c(k),this.h()},h:function(){st(l),h.title=d=M.at.iso8601,st(p),st(_),st(g),g.className="compact",st(y),st(P)},m:function(t,e){r(u,t,e),n(l,u),n(h,l),n(f,h),n(m,u),n(p,u),C._mount(p,null),n(v,u),n(_,u),n(g,_);for(var i=0;i<N.length;i+=1)N[i].m(g,null);n(b,u),n(y,u),n(w,y),n(x,u),n(P,u),n(O,P)},p:function(n,r){M=r.it,r.it_index,n.item&&A!==(A=M.at.ago||M.at.iso8601)&&(f.data=A),n.item&&d!==(d=M.at.iso8601)&&(h.title=d);var i={};n.item&&(i.loc=M.location),C._set(i);var o=M.actions;if(n.item){for(var a=0;a<o.length;a+=1){var s=e({},r,{action:o[a],action_index:a});N[a]?N[a].p(n,s):(N[a]=lt(t,s),N[a].c(),N[a].m(g,null))}for(;a<N.length;a+=1)N[a].u(),N[a].d();N.length=o.length}n.item&&E!==(E=M.rfid||"N/A")&&(w.data=E),n.item&&k!==(k=M.dev||"N/A")&&(O.data=k)},u:function(){i(u);for(var t=0;t<N.length;t+=1)N[t].u()},d:function(){C.destroy(!1),o(N)}}}function lt(e,o){o.it;var a,u,l=o.action,h=(o.it_index,o.action_index,l);return{c:function(){a=s("div"),u=c(h)},m:function(t,e){r(a,t,e),n(u,a)},p:function(t,e){e.it,l=e.action,e.it_index,e.action_index,t.item&&h!==(h=l)&&(u.data=h)},u:function(){i(a)},d:t}}function ht(t,a){for(var u,l,h,m,p,v=a.item.response.meta&&ct(t,a),_=a.item.response.history,g=[],b=0;b<_.length;b+=1)g[b]=ut(t,e({},a,{it:_[b],it_index:b}));return{c:function(){v&&v.c(),u=c("\n    "),l=s("table"),(h=s("thead")).innerHTML="<tr><th svelte-3007816744>at</th><th svelte-3007816744>shelf</th><th svelte-3007816744>action</th><th svelte-3007816744>rfid</th><th svelte-3007816744>dev</th></tr>",m=c("\n      "),p=s("tbody");for(var t=0;t<g.length;t+=1)g[t].c();this.h()},h:function(){l.border="1",f(l,"cellspacing","0"),f(l,"cellpadding","3"),d(l,"max-width","250px")},m:function(t,e){v&&v.m(t,e),r(u,t,e),r(l,t,e),n(h,l),n(m,l),n(p,l);for(var i=0;i<g.length;i+=1)g[i].m(p,null)},p:function(n,r){r.item.response.meta?v?v.p(n,r):((v=ct(t,r)).c(),v.m(u.parentNode,u)):v&&(v.u(),v.d(),v=null);var i=r.item.response.history;if(n.item){for(var o=0;o<i.length;o+=1){var a=e({},r,{it:i[o],it_index:o});g[o]?g[o].p(n,a):(g[o]=ut(t,a),g[o].c(),g[o].m(p,null))}for(;o<g.length;o+=1)g[o].u(),g[o].d();g.length=i.length}},u:function(){v&&v.u(),i(u),i(l);for(var t=0;t<g.length;t+=1)g[t].u()},d:function(){v&&v.d(),o(g)}}}function ft(t){var n,o,a,c;_(this,t),this._state=e({query:""},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(n=this,o=this._state,c=o.item&&o.item.response&&ht(n,o),{c:function(){a=s("div"),c&&c.c()},m:function(t,e){r(a,t,e),c&&c.m(a,null)},p:function(t,e){e.item&&e.item.response?c?c.p(t,e):((c=ht(n,e)).c(),c.m(a,null)):c&&(c.u(),c.d(),c=null)},u:function(){i(a),c&&c.u()},d:function(){c&&c.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}e(L.prototype,b),e(j.prototype,b),e(q.prototype,b),e($.prototype,b),e(Y.prototype,b),e(at.prototype,b),e(ft.prototype,b);const{createRouter:dt}=P;var mt={goHome(){dt.replace("/")}};function pt(t){f(t,"svelte-993550016","")}function vt(t){_(this,t),this._state=e({item_id:null,item_supplier:null,item:null,locationMap:null},t.data);var o,a,u,l,h,f,d,m,p=function(){fetch("/api/shelves").then(t=>t.json()).then(t=>new Promise(e=>{let n=new Map;for(const e of t.results){let t=new Set,r=e.loc.split(".");for(let e=0;e<r.length;e++)t.add({link:`${r.slice(0,e+1).join(".")}`,name:r[e]});n.set(e.loc,t)}e(this.set({locationMap:n}))})).then(()=>{const t=this.get("path");return t.item_id?Promise.resolve(fetch(`/api/item/${t.item_supplier}/${t.item_id}`)):(console.log("ERR",t),Promise.reject("Missing item_id"))}).then(t=>t.json()).then(t=>(console.log(t),this.set({item:t}))).catch(t=>{throw console.log(`something broke: ${t}`),t})}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(o=this,a=this._state,d=new Y({root:o.root,data:{item:a.item,locationMap:a.locationMap}}),m=new ft({root:o.root,data:{item_supplier:a.path.item_supplier,item_id:a.path.item_id,item:a.item,locationMap:a.locationMap}}),{c:function(){u=s("div"),l=s("div"),d._fragment.c(),h=c("\n  "),f=s("div"),m._fragment.c(),this.h()},h:function(){pt(u),pt(l),l.className="item-info",pt(f),f.className="history",u.className="container"},m:function(t,e){r(u,t,e),n(l,u),d._mount(l,null),n(h,u),n(f,u),m._mount(f,null)},p:function(t,e){var n={};t.item&&(n.item=e.item),t.locationMap&&(n.locationMap=e.locationMap),d._set(n);var r={};t.path&&(r.item_supplier=e.path.item_supplier),t.path&&(r.item_id=e.path.item_id),t.item&&(r.item=e.item),t.locationMap&&(r.locationMap=e.locationMap),m._set(r)},u:function(){i(u)},d:function(){d.destroy(!1),m.destroy(!1)}}),this.root._oncreate.push(p),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}e(vt.prototype,mt,b);const{createRouter:_t}=P;var gt={goHome(){_t.replace("/")}};function bt(n){_(this,n),this._state=e({},n.data),this._fragment=function(e,n){var o,a,u;function f(t){e.goHome()}return{c:function(){(o=s("h1")).textContent="404 Not Found",a=c("\n"),(u=s("button")).textContent="Go Home",this.h()},h:function(){l(u,"click",f)},m:function(t,e){r(o,t,e),r(a,t,e),r(u,t,e)},p:t,u:function(){i(o),i(a),i(u)},d:function(){h(u,"click",f)}}}(this,this._state),n.target&&(this._fragment.c(),this._fragment.m(n.target,n.anchor||null))}e(bt.prototype,gt,b);const{createRouter:yt,RouterLink:wt}=P,xt=yt({"/":$,"/shelf":$,"/shelf/:shelfId":$,"/item/:item_supplier/:item_id":{Component:vt,props:{data:{salutation:"Hello"}}}},{pathRegex:"[a-zA-Z0-9._:]+",defaultRoute:bt});function Pt(){xt.destroy()}function Ot(o){_(this,o),this._state=e({},o.data),this._handlers.destroy=[Pt];var u,l,h,f,d,m,p=function(){xt.create("#app")}.bind(this);o.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(u=this,this._state,m=new wt({root:u.root,slots:{default:a()},data:{to:"/shelf"}}),{c:function(){l=s("div"),h=c("Shelf"),m._fragment.c(),f=c("\n  "),d=s("div"),this.h()},h:function(){d.id="app"},m:function(t,e){r(l,t,e),n(h,m._slotted.default),m._mount(l,null),n(f,l),n(d,l)},p:t,u:function(){i(l)},d:function(){m.destroy(!1)}}),this.root._oncreate.push(p),o.target&&(this._fragment.c(),this._fragment.m(o.target,o.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}return yt.listen(()=>{console.log("router changed")}),e(Ot.prototype,b),new Ot({target:document.body,data:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
